<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLAR FOR ALL</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <style>
        /* CSS कोड यहाँ से शुरू होता है */
        :root {
            --primary: #00c6ff;
            --secondary: #0072ff;
            --accent: #ff9d00;
            --dark: #0a1929;
            --darker: #061222;
            --light: #f5f9ff;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --error: #ff3860;
            --success: #23d160;
            --muted: rgba(255, 255, 255, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: url('image/panels-electricity-order-sunlight.jpg.webp') no-repeat center center fixed;
            background-size: cover;
            color: var(--light);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        #login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: transparent;
            padding: 20px;
        }

        .login-box {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2.5rem;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .login-logo-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .login-main-logo {
            height: 80px;
            width: auto;
            margin-bottom: 10px;
        }

        .login-main-text {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0;
            white-space: nowrap;
        }

        .login-box p {
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .login-box input {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 1rem;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .login-box input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .login-box input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 198, 255, 0.4);
        }

        .switch-auth-link {
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .switch-auth-link a {
            color: var(--primary);
            text-decoration: none;
        }

        #main-app {
            display: none;
            width: 100%;
            flex-direction: column;
            align-items: center;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 2rem;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 1000;
            width: 100%;
        }

        .header .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .header-logo-icon {
            height: 35px;
            width: auto;
        }

        .nav-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1001;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            align-items: center;
        }

        .nav-link {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 0.8rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-link:hover {
            color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .language-switcher select {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.5rem;
            cursor: pointer;
        }

        .page-section {
            padding: 3rem 2rem;
            display: none;
            width: 100%;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .section-logo-container {
            text-align: center;
            margin-bottom: 1rem;
        }

        .section-logo {
            height: 60px;
            width: auto;
        }

        .section-title {
            font-size: 2.2rem;
            margin-bottom: 2rem;
            text-align: center;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }

        .home-hero {
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
        }

        .hero-title-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .hero-logo-icon {
            height: 60px;
            width: auto;
        }

        .home-hero h1 {
            font-size: 2.8rem;
            line-height: 1.2;
            margin-bottom: 0;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .home-hero p {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            opacity: 0.9;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
            justify-content: center;
        }

        .feature-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .icon {
            width: 50px;
            height: 50px;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--light);
        }

        .feature-card p {
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }

        .feature-card .btn {
            width: auto;
            margin: 0;
        }

        .info-gallery {
            width: 100%;
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
            box-sizing: border-box;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .gallery-card {
            background: var(--glass);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .gallery-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        .gallery-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        .gallery-details {
            padding: 20px;
            flex-grow: 1;
        }

        .gallery-details h3 {
            color: #fff;
            font-size: 18px;
            margin-top: 0;
            margin-bottom: 10px;
        }

        .gallery-details p {
            font-size: 14px;
            color: #b7d0e7;
            line-height: 1.6;
            margin-bottom: 0;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            opacity: 0.8;
            font-weight: 500;
        }

        .stat-number {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .map-container-large {
            height: 400px;
            background: var(--glass);
            border-radius: 16px;
            margin-bottom: 2rem;
            overflow: hidden;
            position: relative;
        }

        .map-placeholder {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            color: rgba(255, 255, 255, 0.6);
        }

        .did-you-know {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }

        .did-you-know h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .wrap {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .card {
            flex: 1;
            min-width: 300px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .surveyor-section {
            margin-bottom: 1.5rem;
        }

        .lead {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .small-text {
            font-size: 0.85rem;
            opacity: 0.7;
            margin-top: 0.5rem;
        }

        .map-container-calculator {
            height: 300px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .row {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .row>div {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 0.6rem;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--light);
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.25);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(0, 0, 0, 0.3);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .divider {
            border: none;
            height: 1px;
            background: var(--glass-border);
            margin: 1.5rem 0;
        }

        .mutebtn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            border: 1px solid var(--glass-border);
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 100%;
        }

        .mutebtn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .weather-info {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .button-group .btn,
        .button-group .mutebtn {
            width: 100%;
        }

        .button-group .btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 198, 255, 0.3);
        }

        #results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
            padding: 0;
            background: transparent;
        }

        .result-stat-card {
            background: var(--glass);
            padding: 1.25rem 1rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }

        .result-stat-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .result-stat-card svg {
            width: 36px;
            height: 36px;
            color: var(--primary);
            margin-bottom: 0.75rem;
        }

        .result-stat-card h3 {
            font-size: 1.7rem;
            color: var(--light);
            margin: 0 0 0.25rem 0;
            line-height: 1.2;
        }

        .result-stat-card p {
            font-size: 0.85rem;
            color: var(--muted);
            margin: 0;
        }

        .gamification-results-card {
            background: linear-gradient(135deg, rgba(0, 198, 255, 0.1), rgba(0, 114, 255, 0.1));
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid var(--primary);
        }

        .gamification-results-card h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .gamification-results-card p {
            margin-bottom: 1rem;
        }

        .chart-container {
            position: relative;
            max-width: 450px;
            width: 100%;
            margin: 1.5rem auto 0;
        }

        .chat-log {
            height: 400px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .chat-message {
            padding: 0.8rem 1.2rem;
            border-radius: 12px;
            max-width: 80%;
            line-height: 1.5;
        }

        .bot-msg {
            background: rgba(0, 198, 255, 0.15);
            border-left: 3px solid var(--primary);
            margin-right: auto;
        }

        .user-msg {
            background: rgba(255, 157, 0, 0.15);
            border-right: 3px solid var(--accent);
            margin-left: auto;
        }

        .chat-input-row {
            display: flex;
            gap: 1rem;
        }

        .chat-input-row input {
            flex: 1;
        }

        .chat-input-row button {
            width: auto;
        }

        .explainer {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            min-height: 200px;
            margin-bottom: 1rem;
        }

        .speechArea {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        .ai-visual-placeholder,
        .ai-video-placeholder {
            height: 400px;
            background: var(--glass);
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2rem auto;
            color: rgba(255, 255, 255, 0.6);
            border: 2px dashed var(--glass-border);
            max-width: 800px;
        }

        #aiVisual,
        #aiVideo {
            width: 100%;
            border-radius: 16px;
            margin: 2rem auto;
            max-width: 800px;
            display: block;
        }

        .info-section {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .contact-form {
            max-width: 500px;
            margin: 2rem auto 0;
        }

        .contact-form textarea {
            resize: vertical;
            min-height: 120px;
        }

        footer {
            text-align: center;
            padding: 2rem;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-top: 1px solid var(--glass-border);
            margin-top: 3rem;
            width: 100%;
        }

        .message-box {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            background: var(--dark);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateY(150px);
            opacity: 0;
            transition: all 0.4s ease-in-out;
            max-width: 90%;
        }

        .message-box.show {
            transform: translateY(0);
            opacity: 1;
        }

        .message-box.success {
            background: var(--success);
        }

        .message-box.error {
            background: var(--error);
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-content {
            background: var(--dark);
            border-radius: 16px;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid var(--glass-border);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--light);
        }

        .colonist-plans {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .plan-card {
            background: var(--glass);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .plan-card.mars {
            border-top: 4px solid #ff4d4d;
        }

        .plan-card.moon {
            border-top: 4px solid #c0c0c0;
        }

        .plan-card h3 {
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .plan-card p {
            margin-bottom: 1.5rem;
            opacity: 0.8;
        }

        .stat {
            margin-bottom: 1rem;
        }

        .stat h3 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 0.3rem;
        }

        .stat p {
            font-size: 0.9rem;
            margin: 0;
            opacity: 0.7;
        }

        @media (max-width: 900px) {
            .wrap {
                flex-direction: column;
            }

            .nav-menu {
                position: fixed;
                top: 60px;
                left: -100%;
                background: var(--dark);
                width: 100%;
                height: calc(100vh - 60px);
                flex-direction: column;
                justify-content: center;
                padding: 2rem;
                transition: left 0.3s ease;
                z-index: 999;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-toggle {
                display: block;
            }

            .home-hero h1 {
                font-size: 2.2rem;
            }

            .section-title {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 600px) {
            .header {
                padding: 1rem;
            }

            .page-section {
                padding: 2rem 1rem;
            }

            .home-hero h1 {
                font-size: 1.8rem;
            }

            .home-hero p {
                font-size: 1rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .row {
                flex-direction: column;
                gap: 1rem;
            }

            .chat-input-row {
                flex-direction: column;
            }

            .colonist-plans {
                grid-template-columns: 1fr;
            }

            .login-box {
                padding: 1.5rem;
            }

            .card {
                padding: 1.5rem;
            }

            #results {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-stat-card h3 {
                font-size: 1.4rem;
            }
        }

        .chart-container {
            position: relative;
            max-width: 450px;
            width: 100%;
            margin: 1.5rem auto 0;
        }

        /* ===== AI Typing Indicator ===== */
        #typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            margin: 10px 15px;
            align-self: flex-start;
        }

        #typing-indicator .dot {
            width: 8px;
            height: 8px;
            background-color: var(--primary);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        #typing-indicator .dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        #typing-indicator .dot:nth-child(3) {
            animation-delay: -0.32s;
        }

        @keyframes bounce {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1.0);
            }
        }
    </style>
</head>

<body>
    <div id="login-container" class="login-container">
        <div class="login-box">
            <div class="login-logo-section">
                <img src="image/logo2.png" alt="Logo" class="login-main-logo">
                <h1 class="login-main-text">SOLAR FOR ALL</h1>
            </div>
            <p data-lang-key="login_welcome">Welcome! Please log in to continue.</p>
            <input type="text" id="username" placeholder="Enter Username" autocomplete="username">
            <input type="password" id="password" placeholder="Enter Password" autocomplete="current-password">
            <button class="btn" onclick="handleLogin()" data-lang-key="login_btn">Login</button>
        </div>
    </div>

    <div id="main-app">
        <header class="header">
            <div class="logo">
                <img src="image/logo2.png" alt="Logo" class="header-logo-icon">
                <span>SOLAR FOR ALL</span>
            </div>
            <button class="nav-toggle" id="navToggle">☰</button>
            <ul class="nav-menu" id="navMenu">
                <li><a class="nav-link" data-target="#home" data-lang-key="nav_home">Home</a></li>
                <li><a class="nav-link" data-target="#dashboard" data-lang-key="nav_dashboard">Mission Control</a></li>
                <li><a class="nav-link" data-target="#calculator" data-lang-key="nav_calculator">Calculator</a></li>
                <li><a class="nav-link" data-target="#chatbot" data-lang-key="nav_chatbot">AI Chatbot</a></li>
                <li><a class="nav-link" data-target="#ai-explainer" data-lang-key="nav_ai_explainer">Solar Analysis</a></li>
                <li><a class="nav-link" data-target="#ai-visual" data-lang-key="nav_ai_visual">Your Solar Vision</a></li>
                <li><a class="nav-link" data-target="#ai-video" data-lang-key="nav_ai_video">Installation Preview</a></li>
                <li><a class="nav-link" data-target="#help" data-lang-key="nav_help">Help</a></li>
                <li><a class="nav-link" data-target="#contact" data-lang-key="nav_contact">Contact</a></li>
                <li>
                    <div class="language-switcher">
                        <select id="languageSelector" onchange="changeLanguage(this.value)">
                            <option value="en">English</option>
                            <option value="hi">हिन्दी</option>
                        </select>
                    </div>
                </li>
            </ul>
        </header>

        <main style="width:100%">
            <section id="home" class="page-section active">
                <div class="container">
                    <div class="home-hero">
                        <div class="hero-title-container">
                            <img src="image/logo2.png" alt="Logo" class="hero-logo-icon">
                            <h1 data-lang-key="home_title">Light up Your Future with Solar Energy!</h1>
                        </div>
                        <p data-lang-key="home_subtitle">Reduce your electricity bills, protect the environment, and move towards a self-reliant energy future. Our 'SOLAR FOR ALL' calculator and AI will guide you every step of the way.</p>
                        <div class="features-grid">
                            <div class="feature-card">
                                <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm3-6h.008v.008H11.25v-.008Zm0 3h.008v.008H11.25v-.008Zm0 3h.008v.008H11.25v-.008Zm3-6h.008v.008H14.25v-.008Zm0 3h.008v.008H14.25v-.008Zm0 3h.008v.008H14.25v-.008ZM6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z" />
                                </svg>
                                <h3 data-lang-key="home_card1_title">Instant Calculation</h3>
                                <p data-lang-key="home_card1_desc">Estimate your system size, cost, and savings in seconds.</p>
                                <button class="btn nav-link" data-target="#calculator" data-lang-key="home_card1_btn">Go to
                                    Calculator</button>
                            </div>
                            <div class="feature-card">
                                <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M8.25 3v1.5M4.5 8.25H21M18 18h1.5a3 3 0 0 0 0-6h-1.5m-3 0h-1.5a3 3 0 1 0 0 6H15M6.75 12.75H17.25m-10.5-3.75h10.5a3 3 0 0 1 3 3v3.75a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3v-3.75a3 3 0 0 1 3-3Z" />
                                </svg>
                                <h3 data-lang-key="home_card2_title">AI Assistant</h3>
                                <p data-lang-key="home_card2_desc">Ask our AI chatbot anything about solar technology,
                                    subsidies, and maintenance.</p>
                                <button class="btn nav-link" data-target="#chatbot" data-lang-key="home_card2_btn">Chat
                                    Now</button>
                            </div>
                            <div class="feature-card">
                                <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9A2.25 2.25 0 0 0 13.5 5.25h-9A2.25 2.25 0 0 0 2.25 7.5v9A2.25 2.25 0 0 0 4.5 18.75Z" />
                                </svg>
                                <h3 data-lang-key="home_card3_title">Your Solar Vision</h3>
                                <p data-lang-key="home_card3_desc">Visualize your environmental impact with AI-generated
                                    reports and visuals.</p>
                                <button class="btn nav-link" data-target="#ai-visual" data-lang-key="home_card3_btn">See
                                    Visual</button>
                            </div>
                            <div class="feature-card">
                                <svg class="icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M12 21.75c-.997-.997-2.327-1.5-3.75-1.5a6.75 6.75 0 0 1-6.75-6.75A6.75 6.75 0 0 1 8.25 6.75c1.423 0 2.753-.503 3.75-1.5m0 16.5c-.997-.997-2.327-1.5-3.75-1.5a6.75 6.75 0 0 1-6.75-6.75A6.75 6.75 0 0 1 8.25 6.75c1.423 0 2.753-.503 3.75-1.5m0 16.5v-1.5a3 3 0 0 1 3-3h1.5a3 3 0 0 0 3-3V12M12 21.75V12m0 9.75c.997-.997 2.327-1.5 3.75-1.5a6.75 6.75 0 0 1 6.75-6.75A6.75 6.75 0 0 1 15.75 6.75c-1.423 0-2.753-.503-3.75-1.5m0 16.5V12m0 9.75v-1.5a3 3 0 0 1-3-3h-1.5a3 3 0 0 0-3-3V12" />
                                </svg>
                                <h3 data-lang-key="home_card4_title">Community Impact</h3>
                                <p data-lang-key="home_card4_desc">See the real-time environmental impact of our solar
                                    guardians worldwide.</p>
                                <button class="btn nav-link" data-target="#dashboard" data-lang-key="home_card4_btn">See
                                    Impact</button>
                            </div>
                        </div>
                        <div class="info-gallery">
                            <h2 class="section-title" style="margin-top: 80px; margin-bottom: 50px;"
                                data-lang-key="gallery_title">Explore the World of Solar Energy</h2>
                            <div class="gallery-grid">
                                <div class="gallery-card"><img src="image/im1.png" alt="Village with solar panels">
                                    <div class="gallery-details">
                                        <h3 data-lang-key="gallery1_title">Rural Village with Solar Panels on Rooftops</h3>
                                        <p data-lang-key="gallery1_desc">This image shows a village where individual homes
                                            are equipped with rooftop solar panels.</p>
                                    </div>
                                </div>
                                <div class="gallery-card"><img src="image/im2.png" alt="School with solar panels">
                                    <div class="gallery-details">
                                        <h3 data-lang-key="gallery2_title">Village School with Solar Panels</h3>
                                        <p data-lang-key="gallery2_desc">This image highlights a village school powered by
                                            solar energy, enabling lighting and computers for students.</p>
                                    </div>
                                </div>
                                <div class="gallery-card"><img src="image/im3.png" alt="Solar water pump">
                                    <div class="gallery-details">
                                        <h3 data-lang-key="gallery3_title">Agricultural Village with Solar-Powered Water Pump</h3>
                                        <p data-lang-key="gallery3_desc">This image shows a solar-powered pump irrigating
                                            fields, reducing reliance on fossil fuels.</p>
                                    </div>
                                </div>
                                <div class="gallery-card"><img src="image/im4.png" alt="Solar streetlights">
                                    <div class="gallery-details">
                                        <h3 data-lang-key="gallery4_title">Night View of a Village Lit by Solar Streetlights</h3>
                                        <p data-lang-key="gallery4_desc">Solar streetlights enhance safety and extend evening
                                            activities in villages after dark.</p>
                                    </div>
                                </div>
                                <div class="gallery-card"><img src="image/im5.png" alt="Solar mini-grid">
                                    <div class="gallery-details">
                                        <h3 data-lang-key="gallery5_title">Centralized Solar Mini-Grid in a Village</h3>
                                        <p data-lang-key="gallery5_desc">Here, a small solar farm powers a cluster of homes,
                                            providing reliable electricity to a community.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="dashboard" class="page-section">
                <div class="container">
                    <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                    <h2 class="section-title" data-lang-key="dashboard_title">Mission Control: Community Impact</h2>
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <h3 data-lang-key="dashboard_stat1_title">Collective CO₂ Saved</h3>
                            <p id="totalCo2" class="stat-number">0 t/yr</p>
                        </div>
                        <div class="stat-card">
                            <h3 data-lang-key="dashboard_stat2_title">Guardians Joined</h3>
                            <p id="totalUsers" class="stat-number">0</p>
                        </div>
                        <div class="stat-card">
                            <h3 data-lang-key="dashboard_stat3_title">Equivalent Trees Planted</h3>
                            <p id="totalTrees" class="stat-number">0</p>
                        </div>
                    </div>
                    <div id="communityMap" class="map-container-large">
                        <div class="map-placeholder">Initializing Global Connection...</div>
                    </div>
                    <div class="did-you-know">
                        <h3 data-lang-key="did_you_know_title">NASA Tech on Your Roof!</h3>
                        <p data-lang-key="did_you_know_desc">The highly efficient solar cell technology we use today was
                            pioneered by NASA to power satellites and spacecraft. By installing solar, you're using space-age
                            tech to protect Earth!</p>
                    </div>
                </div>
            </section>

            <section id="calculator" class="page-section">
                <div class="container">
                    <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                    <h2 class="section-title" data-lang-key="calc_title">Your Solar Calculator</h2>
                    <div class="wrap">
                        <div class="card">
                            <div class="surveyor-section">
                                <h3 data-lang-key="surveyor_title">Virtual Roof Surveyor</h3>
                                <p class="lead" data-lang-key="surveyor_address_label">Enter your exact address or just your
                                    city name.</p>
                                <input type="text" id="addressInput" placeholder="Detecting your location automatically...">
                                <div id="map" class="map-container-calculator">
                                    <div class="map-placeholder">Map will load here...</div>
                                </div>
                                <p class="small-text" data-lang-key="surveyor_instructions">Use the draw tool (■) on the map
                                    for exact area.</p>
                            </div>
                            <hr class="divider">
                            <h1 data-lang-key="calc_heading">SOLAR FOR ALL</h1>
                            <p class="lead" data-lang-key="calc_subtitle">Enter your bill/units to get system size, cost, and
                                savings.</p>
                            <div class="row">
                                <div><label data-lang-key="calc_bill_label">Monthly Bill (₹)</label><input id="bill"
                                        type="number" value="2000" /></div>
                                <div><label data-lang-key="calc_budget_label">Budget (₹)</label><input id="budget"
                                        type="number" placeholder="Optional" /></div>
                            </div>
                            <div class="row">
                                <div><label data-lang-key="calc_tariff_label">Tariff (₹/unit)</label><input id="tariff"
                                        type="number" value="7" /></div>
                                <div><label data-lang-key="calc_cost_label">Cost per kW (₹)</label><input id="cost"
                                        type="number" value="55000" /></div>
                            </div>
                            <div class="row">
                                <div><label data-lang-key="calc_roof_label">Roof Area (sq ft)</label><input id="roofArea"
                                        type="number" placeholder="Auto-filled from map" readonly /></div>
                                <div><label data-lang-key="calc_lang_label">Language</label><select id="langSelect">
                                        <option value="hi">हिन्दी</option>
                                        <option value="en">English</option>
                                    </select></div>
                            </div>
                            <hr class="divider">
                            <div class="govt-schemes-section">
                                <h3 data-lang-key="schemes_title">Government Schemes & Subsidy</h3>
                                <p data-lang-key="schemes_subtitle">Get an estimate of your government subsidy.</p>
                                <div class="row">
                                    <div>
                                        <label data-lang-key="schemes_state">State</label>
                                        <select id="stateSelect">
                                            <option value="MP">Madhya Pradesh</option>
                                            <option value="UP">Uttar Pradesh</option>
                                            <option value="GUJ">Gujarat</option>
                                            <option value="OTHER">Other</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label data-lang-key="schemes_income">Monthly Income (₹)</label>
                                        <input id="monthlyIncome" type="number" placeholder="e.g., 20000" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div>
                                        <label data-lang-key="schemes_bank">Loan Bank</label>
                                        <select id="bankSelect">
                                            <option value="SBI">SBI</option>
                                            <option value="HDFC">HDFC Bank</option>
                                            <option value="PNB">PNB</option>
                                            <option value="NONE">No Loan</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label data-lang-key="schemes_panel">Panel Type</label>
                                        <select id="panelTypeSelect">
                                            <option value="MONO">Mono-PERC</option>
                                            <option value="POLY">Polycrystalline</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div id="weather-info" class="weather-info" style="display:none;"></div>
                            <div class="button-group">
                                <button class="btn" onclick="calculate()" data-lang-key="calc_calc_btn">Calculate</button>
                                <button class="mutebtn" onclick="resetAll()" data-lang-key="calc_reset_btn">Reset</button>
                            </div>
                            <div class="results-container">
                                <div id="results" style="display:none;"></div>
                                <div id="subsidy-results" style="display:none;"></div>
                                <div id="gamification-results" style="display:none;"></div>
                                <div id="aqi-container" style="display:none; margin-top: 1rem;">
                                    <h3 data-lang-key="aqi_title" style="margin-bottom: 1rem; text-align: center;">Live Air
                                        Quality</h3>
                                    <div id="aqi-results" class="stat-card"></div>
                                </div>
                            </div>
                            <h3 id="emi-title" style="display:none;" data-lang-key="calc_emi_title">EMI Comparison</h3>
                            <div class="chart-container">
                                <canvas id="emiChart"></canvas>
                            </div>
                            <h3 id="pollution-title" style="display:none;" data-lang-key="pollution_title">Pollution
                                Reduction Impact</h3>
                            <div class="chart-container">
                                <canvas id="pollutionChart"></canvas>
                            </div>
                            <button class="btn" onclick="generateAI()" data-lang-key="explainer_generate_btn"
                                style="margin-top: 2rem;">✨ <span data-lang-key="explainer_generate_btn_text">Generate
                                    Solar Analysis</span></button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="chatbot" class="page-section">
                <div class="container">
                    <div class="section-logo-container">
                        <img src="image/logo2.png" alt="Logo" class="section-logo">
                    </div>
                    <h2 class="section-title" data-lang-key="chat_title">Ask Your Solar Bot 🤖</h2>
                    <div class="card" style="max-width: 900px; margin: 0 auto;">
                        <div id="chatLog" class="chat-log">
                            <div class="chat-message bot-msg" data-lang-key="chat_welcome">Hello! I'm here to answer your
                                questions about solar energy.</div>
                        </div>
                        <div id="typing-indicator" style="display: none;">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <div class="chat-input-row">
                            <input type="text" id="chatInput" data-lang-key="chat_placeholder"
                                placeholder="e.g., How much does solar energy cost?" onkeydown="handleChatInput(event)" />
                            <button class="btn" onclick="askChatbot()" data-lang-key="chat_send_btn">Send</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="ai-explainer" class="page-section">
                <div class="container">
                    <div class="info-section">
                        <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                        <h2 class="section-title" data-lang-key="explainer_title">Solar Analysis</h2>
                        <p data-lang-key="explainer_subtitle">Here is your personalized analysis and voice-over script.</p>
                        <div class="card" style="margin-top: 2rem; text-align: left;">
                            <div class="explainer">
                                <div id="anim-main" class="speechArea">Your generated script will appear here after calculation.</div>
                            </div>
                            <div id="playStopButtons-main" class="visible" style="gap: 10px; margin-top: 15px; display:flex;">
                                <button class="btn" onclick="playSpeech()" data-lang-key="explainer_play_btn">Play</button>
                                <button class="mutebtn" onclick="pauseSpeech()" data-lang-key="explainer_stop_btn">Stop</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="ai-visual" class="page-section">
                <div class="container">
                    <div class="info-section">
                        <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                        <h2 class="section-title" data-lang-key="visual_title">Your Solar Vision</h2>
                        <p data-lang-key="visual_subtitle">Here you can view a personalized visual based on your solar energy
                            calculation. Just click 'Generate Visual'!</p>
                        <div class="ai-visual-placeholder">
                            <p data-lang-key="visual_placeholder">Visual will appear here</p>
                        </div>
                        <img id="aiVisual" alt="AI Generated Explainer Image" style="display:none;">
                        <button class="btn" onclick="generateExplainerVisual()" data-lang-key="visual_generate_btn">Generate Visual</button>
                    </div>
                </div>
            </section>

            <section id="ai-video" class="page-section">
                <div class="container">
                    <div class="info-section">
                        <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                        <h2 class="section-title" data-lang-key="video_title">Installation Preview</h2>
                        <p data-lang-key="video_subtitle">Here you can watch a personalized video based on your solar energy
                            calculation. Just click 'Generate Video'!</p>
                        <div class="ai-video-placeholder">
                            <p data-lang-key="video_placeholder">Video will appear here</p>
                        </div>
                        <video id="aiVideo" controls style="display:none;"></video>
                        <button class="btn" onclick="generateExplainerVideo()" data-lang-key="video_generate_btn">Generate Video</button>
                    </div>
                </div>
            </section>

            <section id="help" class="page-section">
                <div class="container">
                    <div class="info-section">
                        <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                        <h2 class="section-title" data-lang-key="help_title">Help Center</h2>
                        <p data-lang-key="help_subtitle1">Here you will find answers to frequently asked questions about solar
                            energy, our calculator, and services.</p>
                        <ul class="faq-list">
                            <li>
                                <h4 data-lang-key="faq1_q">What is solar energy?</h4>
                                <p data-lang-key="faq1_a">Solar energy is energy generated by converting sunlight into
                                    electricity, typically using photovoltaic (PV) panels.</p>
                            </li>
                            <li>
                                <h4 data-lang-key="faq2_q">What are the benefits of solar energy?</h4>
                                <p data-lang-key="faq2_a">Solar energy reduces electricity bills, decreases the carbon
                                    footprint, and provides energy independence.</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <section id="contact" class="page-section">
                <div class="container">
                    <div class="info-section">
                        <div class="section-logo-container"><img src="logo2.png" alt="Logo" class="section-logo"></div>
                        <h2 class="section-title" data-lang-key="contact_title">Contact Us</h2>
                        <p data-lang-key="contact_subtitle">Contact us to learn more about our solar energy solutions or for
                            any inquiries.</p>
                        <form class="contact-form">
                            <input type="text" data-lang-key="contact_name_placeholder" placeholder="Your Name" />
                            <input type="email" data-lang-key="contact_email_placeholder" placeholder="Your Email" />
                            <textarea data-lang-key="contact_message_placeholder" placeholder="Your Message" rows="5"></textarea>
                            <button type="submit" class="btn" data-lang-key="contact_send_btn">Send Message</button>
                        </form>
                    </div>
                </div>
            </section>
        </main>

        <div id="messageBox" class="message-box"></div>
        <footer>
            <p data-lang-key="footer_text">&copy; 2025 SOLAR FOR ALL.</p>
        </footer>
    </div>

    <div id="colonist-modal" class="modal-backdrop" style="display:none;">
        <div class="modal-content">
            <span class="modal-close" onclick="closeColonistModal()">&times;</span>
            <h2 data-lang-key="colonist_title">🚀 Solar Colonist Mode</h2>
            <p data-lang-key="colonist_subtitle">Here's the solar setup your home would need to survive off-world.</p>
            <div class="colonist-plans">
                <div class="plan-card mars">
                    <h3>On Mars</h3>
                    <p>Due to a thin atmosphere and dust storms, you'd need a robust system.</p>
                    <div class="stat">
                        <h3 id="mars-kw">- kW</h3>
                        <p>System Size</p>
                    </div>
                    <div class="stat">
                        <h3 id="mars-battery">- kWh</h3>
                        <p>Battery Storage</p>
                    </div>
                </div>
                <div class="plan-card moon">
                    <h3>On The Moon</h3>
                    <p>To survive the 14-day lunar night, massive energy storage is critical.</p>
                    <div class="stat">
                        <h3 id="moon-kw">- kW</h3>
                        <p>System Size</p>
                    </div>
                    <div class="stat">
                        <h3 id="moon-battery">- kWh</h3>
                        <p>Battery Storage</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // JavaScript कोड यहाँ से शुरू होता है
        // ===== GLOBAL VARIABLES & STATE =====
        const myVisualImages = ['gen1.jpg', 'gen2.jpg', 'gen3.jpg', 'gen4.jpg', 'gen5.jpg'];
        const myAiVideos = ['explainer1.mp4', 'explainer2.mp4', 'explainer3.mp4', 'explainer4.mp4'];
        let map, communityMap, drawnItems, drawControl, chart, pollutionChart, lastCalc, communityData = [],
            locationDetected = false,
            currentLanguage = 'en',
            speechSynthesisInstance = null;

        // ===== INITIALIZATION & EVENT LISTENERS =====
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('main-app').style.display = 'none';
            document.getElementById('login-container').style.display = 'flex';
            initializeMaps();
            changeLanguage('en');
            setupEventListeners();
        });

        function initializeMaps() {
            try {
                const osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                });
                const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                    attribution: 'Tiles &copy; Esri'
                });
                map = L.map('map', {
                    layers: [satelliteLayer]
                }).setView([23.1815, 79.9864], 12);
                L.control.layers({
                    "Satellite": satelliteLayer,
                    "Street View": osmLayer
                }).addTo(map);
                drawnItems = new L.FeatureGroup();
                map.addLayer(drawnItems);
                drawControl = new L.Control.Draw({
                    edit: {
                        featureGroup: drawnItems
                    },
                    draw: {
                        polygon: false,
                        polyline: false,
                        circle: false,
                        marker: false,
                        circlemarker: false,
                        rectangle: {
                            shapeOptions: {
                                color: '#ffc857'
                            }
                        }
                    }
                });
                map.addControl(drawControl);
                map.on(L.Draw.Event.CREATED, function(event) {
                    const layer = event.layer;
                    drawnItems.clearLayers();
                    drawnItems.addLayer(layer);
                    const areaInSqFt = (L.GeometryUtil.geodesicArea(layer.getLatLngs()[0]) * 10.7639).toFixed(0);
                    document.getElementById("roofArea").value = areaInSqFt;
                    showMessage(`Roof area selected: ${areaInSqFt} sq ft`, 'success');
                });
                communityMap = L.map('communityMap').setView([20.5937, 78.9629], 5);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(communityMap);
                autoDetectLocation();
            } catch (e) {
                console.error("Map initialization failed:", e);
            }
        }

        function setupEventListeners() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    showSection(this.getAttribute('data-target'));
                    document.getElementById('navMenu').classList.remove('active');
                });
            });
            document.getElementById('navToggle').addEventListener('click', () => {
                document.getElementById('navMenu').classList.toggle('active');
            });
            document.querySelector('.contact-form').addEventListener('submit', (e) => {
                e.preventDefault();
                showMessage('Message sent successfully!', 'success');
                e.target.reset();
            });
            document.getElementById('addressInput').addEventListener('keydown', (event) => {
                if (event.key === 'Enter') getLocation();
            });
            document.getElementById('langSelect').addEventListener('change', (e) => {
                changeLanguage(e.target.value);
            });
        }

        // ===== CORE APP LOGIC & AI FUNCTIONS =====

        function handleLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            if (username === 'nasa' && password === '1234') {
                document.getElementById('login-container').style.display = 'none';
                document.getElementById('main-app').style.display = 'flex';
                showSection('#home');
            } else {
                showMessage("Invalid username or password.", 'error');
            }
        }

        async function calculate() {
            showMessage("Calculating your solar potential...");
            const bill = parseFloat(document.getElementById("bill").value);
            const tariff = parseFloat(document.getElementById("tariff").value);
            const costPerKw = parseFloat(document.getElementById("cost").value);
            if (isNaN(bill) || isNaN(tariff) || isNaN(costPerKw) || bill <= 0 || tariff <= 0 || costPerKw <= 0) {
                showMessage("Please enter valid positive numbers for bill, tariff, and cost.", "error");
                return;
            }
            const budget = parseFloat(document.getElementById("budget").value) || Infinity;
            const roofArea = parseFloat(document.getElementById("roofArea").value) || Infinity;
            const monthlyIncome = parseFloat(document.getElementById("monthlyIncome").value) || 0;
            const state = document.getElementById("stateSelect").value;
            const bank = document.getElementById("bankSelect").value;
            const panelType = document.getElementById("panelTypeSelect").value;

            const locationData = await getLocation();
            if (!locationData) {
                showMessage("Location not found. Please enter a valid address.", 'error');
                return;
            }

            const solarData = await getNasaSolarData(locationData.lat, locationData.lon);
            const aqiData = await getAqiData(locationData.lat, locationData.lon);

            const units = bill / tariff;
            let requiredKw = (units / (solarData.avgInsolation * 30));
            if (roofArea !== Infinity && roofArea > 0) {
                const maxKwFromRoof = (roofArea / (panelType === 'MONO' ? 80 : 100));
                if (requiredKw > maxKwFromRoof) {
                    requiredKw = maxKwFromRoof;
                    showMessage("System size adjusted to fit your roof area.", 'success');
                }
            }
            let installCost = (requiredKw * costPerKw);
            if (installCost > budget) {
                requiredKw = (budget / costPerKw);
                installCost = budget;
                showMessage("System size adjusted to fit your budget.", 'success');
            }
            const monthlySavings = (units * tariff * 0.9);
            const payback = (monthlySavings > 0) ? (installCost / (monthlySavings * 12)) : "N/A";
            const co2 = (requiredKw * 1.5);
            const trees = Math.round(co2 * 45);

            const subsidyInfo = checkSubsidyEligibility(state, monthlyIncome, bill, requiredKw, installCost);
            const finalCostAfterSubsidy = installCost - subsidyInfo.subsidyAmount;
            const loanInfo = getLoanInfo(bank, finalCostAfterSubsidy);

            lastCalc = {
                bill,
                requiredKw: requiredKw.toFixed(2),
                installCost: installCost.toFixed(0),
                monthlySavings: monthlySavings.toFixed(0),
                payback: payback !== "N/A" ? payback.toFixed(1) : payback,
                co2: co2.toFixed(1),
                trees,
                aqiData,
                subsidyInfo,
                loanInfo,
                finalCostAfterSubsidy: finalCostAfterSubsidy.toFixed(0)
            };

            displayResults(lastCalc);
            displaySubsidyResults(subsidyInfo, installCost, loanInfo);
            updateGamificationResults(lastCalc);
            updateCommunityData({
                co2: parseFloat(lastCalc.co2),
                trees,
                lat: locationData.lat,
                lon: locationData.lon
            });
            displayAqiResults(aqiData);
        }

        const scripts = {
            hi: (data) => `नमस्ते! आपके ₹${data.bill} के बिल के आधार पर, आपको लगभग ${data.requiredKw} किलोवाट का सोलर सिस्टम चाहिए। इसका अनुमानित खर्च ₹${data.installCost} होगा। आप हर महीने लगभग ₹${data.monthlySavings} बचाएंगे और आपका पैसा ${data.payback} साल में वसूल हो जाएगा। यह ${data.co2} टन कार्बन डाइऑक्साइड बचाने के बराबर है, जो ${data.trees} पेड़ लगाने जैसा है।`,
            en: (data) => `Hello! Based on your bill of ₹${data.bill}, you'll need an approximate ${data.requiredKw} kilowatt solar system. The estimated cost will be ₹${data.installCost}. You'll save around ₹${data.monthlySavings} per month, and the payback period is ${data.payback} years. This is equivalent to saving ${data.co2} tons of carbon dioxide, which is like planting ${data.trees} trees.`
        };

        function generateAI() {
            if (!lastCalc) {
                showMessage('Please run a calculation first to generate an AI explainer.', 'error');
                return;
            }
            const lang = document.getElementById('langSelect').value;
            const scriptText = scripts[lang](lastCalc);
            document.getElementById('anim-main').textContent = scriptText;
            showSection('#ai-explainer');
            showMessage("AI Solar Analysis Generated!", 'success');
        }

        function playSpeech() {
            const text = document.getElementById('anim-main').textContent;
            if (!text || text.includes("Your generated script")) {
                showMessage("Please generate an analysis first.", "error");
                return;
            }
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            const utterance = new SpeechSynthesisUtterance(text);
            const lang = document.getElementById('langSelect').value;
            utterance.lang = lang === 'hi' ? 'hi-IN' : 'en-US';
            speechSynthesis.speak(utterance);
        }

        function pauseSpeech() {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
        }

        async function autoDetectLocation() {
            if (locationDetected) return;
            locationDetected = true;
            showMessage("Attempting to auto-detect your location...");
            navigator.geolocation.getCurrentPosition(
                async (pos) => {
                    const {
                        latitude,
                        longitude
                    } = pos.coords;
                    map.setView([latitude, longitude], 18);
                    showMessage("GPS location detected!", 'success');
                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);
                    const data = await response.json();
                    document.getElementById('addressInput').value = data.display_name;
                },
                async () => {
                    showMessage("GPS failed. Trying to find city via IP address...");
                    try {
                        const response = await fetch('https://ipapi.co/json/');
                        const data = await response.json();
                        map.setView([data.latitude, data.longitude], 12);
                        document.getElementById('addressInput').value = `${data.city}, ${data.region}`;
                        showMessage(`Approximate location found: ${data.city}`, 'success');
                    } catch (ipErr) {
                        showMessage("Automatic location detection failed.", 'error');
                    }
                }
            );
        }

        async function getLocation() {
            const addressText = document.getElementById('addressInput').value;
            if (!addressText) {
                showMessage("Please enter an address or city.", "error");
                return null;
            }
            try {
                const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(addressText)}`);
                const data = await response.json();
                if (data && data.length > 0) {
                    const loc = data[0];
                    map.setView([loc.lat, loc.lon], 16);
                    return {
                        lat: parseFloat(loc.lat),
                        lon: parseFloat(loc.lon)
                    };
                } else {
                    showMessage("Could not find location.", "error");
                    return null;
                }
            } catch (e) {
                console.error("Geocoding Error:", e);
                return null;
            }
        }

        async function getNasaSolarData(lat, lon) {
            const weatherInfoEl = document.getElementById("weather-info");
            weatherInfoEl.style.display = 'block';
            weatherInfoEl.textContent = "Fetching data from NASA...";
            try {
                const response = await fetch(
                    `https://power.larc.nasa.gov/api/temporal/daily/point?parameters=ALLSKY_SFC_SW_DWN&community=RE&longitude=${lon}&latitude=${lat}&format=JSON&start=2024&end=2024`
                );

                if (!response.ok) throw new Error('Server error');
                const data = await response.json();
                const avgInsolation = data.properties.parameter.ALLSKY_SFC_SW_DWN.mean;
                if (avgInsolation > 0) {
                    weatherInfoEl.textContent = `☀️ NASA Data: Avg. ${avgInsolation.toFixed(2)} kWh/m²/day.`;
                    return {
                        avgInsolation
                    };
                }
                throw new Error('Invalid NASA data');
            } catch (e) {
                weatherInfoEl.textContent = "⚠️ NASA data unavailable. Using estimate (4.5 kWh).";
                return {
                    avgInsolation: 4.5
                };
            }
        }

        async function getAqiData(lat, lon) {
            try {
                const response = await fetch(`https://api.waqi.info/feed/geo:${lat};${lon}/?token=demo`);
                if (!response.ok) throw new Error('Server error');
                const data = await response.json();
                return data.status === "ok" ? {
                    aqi: data.data.aqi,
                    city: data.data.city.name
                } : null;
            } catch (e) {
                console.error("AQI Data Fetch Error:", e);
                return null;
            }
        }

        function showSection(targetId) {
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            const target = document.querySelector(targetId);
            if (target) target.classList.add('active');
            if (targetId === '#dashboard') renderDashboard();
        }

        function showMessage(message, type = '') {
            const box = document.getElementById('messageBox');
            box.textContent = message;
            box.className = 'message-box';
            if (type) box.classList.add(type);
            box.classList.add('show');
            setTimeout(() => {
                box.classList.remove('show');
            }, 4000);
        }

        function resetAll() {
            document.getElementById("bill").value = 2000;
            document.getElementById("budget").value = "";
            document.getElementById("roofArea").value = "";
            document.getElementById("addressInput").value = "";
            document.getElementById("results").style.display = "none";
            document.getElementById("subsidy-results").style.display = "none";
            document.getElementById("gamification-results").style.display = "none";
            document.getElementById("weather-info").style.display = "none";
            document.getElementById("emi-title").style.display = "none";
            document.getElementById("pollution-title").style.display = "none";
            document.querySelectorAll('.chart-container').forEach(c => c.style.display = 'none');
            if (chart) chart.destroy();
            if (pollutionChart) pollutionChart.destroy();
            drawnItems.clearLayers();
            showMessage("Form has been reset.", 'success');
        }

        function displayResults(data) {
            document.getElementById("results").style.display = "grid";
            document.getElementById("results").innerHTML = `<div class="result-stat-card"><h3>${data.requiredKw} kW</h3><p>System Size</p></div><div class="result-stat-card"><h3>₹${data.installCost}</h3><p>Total Cost</p></div><div class="result-stat-card"><h3>₹${data.monthlySavings}</h3><p>Monthly Savings</p></div><div class="result-stat-card"><h3>${data.payback} yrs</h3><p>Payback</p></div><div class="result-stat-card"><h3>${data.co2} t/yr</h3><p>CO₂ Saved</p></div><div class="result-stat-card"><h3>${data.trees}</h3><p>Trees Equivalent</p></div>`;

            const emiChartEl = document.getElementById("emiChart");
            const emiTitleEl = document.getElementById("emi-title");

            emiTitleEl.style.display = 'block';
            emiChartEl.parentElement.style.display = 'block';

            if (chart) chart.destroy();
            chart = new Chart(emiChartEl.getContext("2d"), {
                type: "bar",
                data: {
                    labels: ["12 EMI", "24 EMI", "36 EMI"],
                    datasets: [{
                        label: "Monthly Payment (₹)",
                        data: [(data.finalCostAfterSubsidy / 12).toFixed(0), (data.finalCostAfterSubsidy / 24).toFixed(0), (data.finalCostAfterSubsidy / 36).toFixed(0)],
                        backgroundColor: ["#ff9d00", "#00c6ff", "#0072ff"]
                    }]
                }
            });

            if (data.aqiData && data.aqiData.aqi) {
                displayPollutionChart(data.aqiData.aqi, data.co2);
            }
        }

        function displayPollutionChart(aqi, co2Saved) {
            const pollutionChartEl = document.getElementById("pollutionChart");
            const pollutionTitleEl = document.getElementById("pollution-title");

            pollutionTitleEl.style.display = 'block';
            pollutionChartEl.parentElement.style.display = 'block';

            const aqiReduction = co2Saved * 5;
            const newAqi = Math.max(0, (aqi - aqiReduction));

            if (pollutionChart) pollutionChart.destroy();
            pollutionChart = new Chart(pollutionChartEl.getContext("2d"), {
                type: "doughnut",
                data: {
                    labels: ["Remaining AQI", "AQI Reduced by Solar"],
                    datasets: [{
                        label: "Air Quality Index (AQI)",
                        data: [newAqi, aqiReduction],
                        backgroundColor: ["#ff9d00", "#23d160"],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        title: {
                            display: true,
                            text: `Original AQI: ${aqi}`
                        }
                    }
                }
            });
        }

        function updateGamificationResults(data) {
            const annualKwh = data.requiredKw * 4.5 * 365;
            const roverDays = (annualKwh / 2.5).toFixed(0);
            const issSeconds = ((data.requiredKw / 120) * 3600).toFixed(0);
            const gamificationEl = document.getElementById("gamification-results");
            gamificationEl.style.display = "block";
            gamificationEl.innerHTML = `<div class="gamification-results-card"><h3>🚀 Your Mission Impact</h3><p>Your annual energy could power NASA's <strong>Perseverance Rover on Mars for ${roverDays} days!</strong></p><p>It could also power the <strong>International Space Station for ${issSeconds} seconds!</strong></p><button class="btn" style="width:auto; margin-top:15px;" onclick="showColonistModal()">Activate Solar Colonist Mode</button></div>`;
        }

        function showColonistModal() {
            if (!lastCalc) {
                showMessage('Please calculate your Earth-based system first!', 'error');
                return;
            }
            const kw = parseFloat(lastCalc.requiredKw);
            document.getElementById('mars-kw').textContent = `${(kw * 2.3).toFixed(2)} kW`;
            document.getElementById('mars-battery').textContent = `${(kw * 10 * 5).toFixed(1)} kWh`;
            document.getElementById('moon-kw').textContent = `${(kw * 1.1).toFixed(2)} kW`;
            document.getElementById('moon-battery').textContent = `${(kw * 10 * 20).toFixed(1)} kWh`;
            document.getElementById('colonist-modal').style.display = 'flex';
        }

        function closeColonistModal() {
            document.getElementById('colonist-modal').style.display = 'none';
        }

        function updateCommunityData(data) {
            communityData.push(data);
            if (document.querySelector('#dashboard').classList.contains('active')) {
                renderDashboard();
            }
        }

        function renderDashboard() {
            let totalCo2 = 0,
                totalTrees = 0;
            communityData.forEach(item => {
                totalCo2 += item.co2;
                totalTrees += item.trees;
            });
            document.getElementById("totalCo2").textContent = `${totalCo2.toFixed(1)} t/yr`;
            document.getElementById("totalTrees").textContent = totalTrees;
            document.getElementById("totalUsers").textContent = communityData.length;
            if (communityData.length > 0) {
                const latest = communityData[communityData.length - 1];
                L.circleMarker([latest.lat, latest.lon], {
                    radius: 8,
                    fillColor: "#ff9d00",
                    color: "#fff",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(communityMap);
            }
        }

        function displayAqiResults(aqiData) {
            const aqiContainer = document.getElementById('aqi-container');
            const aqiEl = document.getElementById('aqi-results');
            if (!aqiData || typeof aqiData.aqi === 'undefined') {
                aqiContainer.style.display = 'none';
                return;
            }
            let quality = '',
                color = '';
            if (aqiData.aqi <= 50) {
                quality = 'Good';
                color = '#23d160';
            } else if (aqiData.aqi <= 100) {
                quality = 'Moderate';
                color = '#ff9d00';
            } else {
                quality = 'Unhealthy';
                color = '#ff3860';
            }
            aqiEl.innerHTML = `<p style="margin-bottom: 0.5rem;"><strong>City:</strong> ${aqiData.city.split(',')[0]}</p><h3 style="font-size: 2.5rem; color: ${color}; margin: 0.5rem 0;">${aqiData.aqi}</h3><p style="color: ${color};"><strong>${quality}</strong></p>`;
            aqiContainer.style.display = 'block';
        }

        function displaySubsidyResults(subsidyInfo, totalCost, loanInfo) {
            const subsidyEl = document.getElementById("subsidy-results");
            subsidyEl.style.display = "block";
            if (!subsidyInfo.isEligible) {
                subsidyEl.innerHTML = `<div class="gamification-results-card" style="border-left: 4px solid #ff3860;"><h3>❌ Not Eligible for Subsidy</h3><p>Your electricity bill is very low, which suggests solar energy might not be the most economical option for you right now.</p></div>`;
            } else {
                let loanDetails = '';
                if (loanInfo.bankName !== 'No Loan') {
                    const monthlyEMI = loanInfo.monthlyEMI.toFixed(0);
                    loanDetails = `<p>Your estimated <strong>${loanInfo.bankName}</strong> EMI is <strong>₹${monthlyEMI.toLocaleString()}/month</strong> for a period of ${loanInfo.loanTenure} years.</p>`;
                }
                subsidyEl.innerHTML = `<div class="gamification-results-card"><h3>💰 Your Subsidy Potential</h3><p>Based on your details, you may be eligible for the <strong>${subsidyInfo.schemeName}</strong>.</p><p>Estimated Subsidy Amount: <strong>₹${subsidyInfo.subsidyAmount.toLocaleString()}</strong></p><p>Cost after subsidy: <strong>₹${(totalCost - subsidyInfo.subsidyAmount).toLocaleString()}</strong></p>${loanDetails}<p class="small-text">This is an estimate. Final amount may vary. Apply on the official government portal.</p></div>`;
            }
        }

        function checkSubsidyEligibility(state, income, monthlyBill, systemSize, totalCost) {
            let subsidyAmount = 0;
            let schemeName = "No specific scheme found";
            let isEligible = false;
            if (monthlyBill >= 500) {
                isEligible = true;
            } else {
                return {
                    isEligible: false,
                    schemeName,
                    subsidyAmount: 0
                };
            }
            if (state === 'MP') {
                if (income <= 25000 && systemSize <= 3) {
                    subsidyAmount = Math.min(60000, totalCost * 0.4);
                    schemeName = "PM Surya Ghar (Madhya Pradesh)";
                } else if (systemSize > 3 && systemSize <= 10) {
                    subsidyAmount = Math.min(78000, totalCost * 0.3);
                    schemeName = "PM Surya Ghar (Madhya Pradesh)";
                }
            } else if (state === 'UP') {
                if (income <= 20000) {
                    subsidyAmount = Math.min(50000, totalCost * 0.35);
                    schemeName = "UP Solar Rooftop Subsidy Scheme";
                }
            } else if (state === 'GUJ') {
                if (systemSize <= 3) {
                    subsidyAmount = Math.min(80000, totalCost * 0.5);
                    schemeName = "Gujarat Solar Subsidy Scheme";
                }
            }
            return {
                isEligible,
                schemeName,
                subsidyAmount
            };
        }

        function getLoanInfo(bank, costAfterSubsidy) {
            if (bank === 'NONE') {
                return {
                    bankName: 'No Loan',
                    loanAmount: 0,
                    loanTenure: 0,
                    monthlyEMI: 0
                };
            }
            let loanRate = 0,
                loanTenure = 5;
            const loanAmount = costAfterSubsidy;
            if (bank === 'SBI') {
                loanRate = 8.5;
            } else if (bank === 'HDFC') {
                loanRate = 9.2;
            } else if (bank === 'PNB') {
                loanRate = 8.8;
            }
            const monthlyRate = loanRate / 12 / 100;
            const numberOfMonths = loanTenure * 12;
            const monthlyEMI = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, numberOfMonths) / (Math.pow(1 + monthlyRate, numberOfMonths) - 1);
            return {
                bankName: bank,
                loanAmount,
                loanTenure,
                monthlyEMI
            };
        }

        function generateExplainerVisual() {
            if (!lastCalc) {
                showMessage('Please run a calculation first.', 'error');
                return;
            }
            const visualEl = document.getElementById('aiVisual');
            const placeholder = document.querySelector('.ai-visual-placeholder');
            const randomIndex = Math.floor(Math.random() * myVisualImages.length);
            visualEl.src = myVisualImages[randomIndex];
            placeholder.style.display = 'none';
            visualEl.style.display = 'block';
            showMessage("AI visual generated!", 'success');
        }

        function generateExplainerVideo() {
            if (!lastCalc) {
                showMessage('Please run a calculation first.', 'error');
                return;
            }
            const videoEl = document.getElementById('aiVideo');
            const placeholder = document.querySelector('.ai-video-placeholder');
            const randomIndex = Math.floor(Math.random() * myAiVideos.length);
            videoEl.src = myAiVideos[randomIndex];
            placeholder.style.display = 'none';
            videoEl.style.display = 'block';
            videoEl.load();
            videoEl.play();
            showMessage("AI video generated!", 'success');
        }

        function addMessageToLog(content, type) {
            const chatLog = document.getElementById('chatLog');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}`;
            const sanitizedContent = content.replace(/</g, "&lt;").replace(/>/g, "&gt;");
            messageDiv.innerHTML = sanitizedContent;
            chatLog.appendChild(messageDiv);
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function handleChatInput(event) {
            if (event.key === 'Enter') {
                askChatbot();
            }
        }

        async function askChatbot() {
            const inputEl = document.getElementById('chatInput');
            const input = inputEl.value.trim();
            if (!input) return;
            addMessageToLog(input, 'user-msg');
            inputEl.value = '';
            inputEl.disabled = true;
            const typingIndicator = document.getElementById('typing-indicator');
            typingIndicator.style.display = 'flex';
            try {
                // यह एक Mock API Call है, असली API के लिए आपको backend server की ज़रूरत होगी
                const mockResponse = {
                    generated_text: "I'm a solar energy assistant. I can help you with information about solar panel installation, subsidies, and maintenance. How can I assist you today?"
                };

                await new Promise(resolve => setTimeout(resolve, 1000));

                const botReply = mockResponse.generated_text;
                addMessageToLog(botReply, 'bot-msg');
            } catch (error) {
                console.error("Chatbot Error:", error);
                addMessageToLog("Sorry, I am having trouble connecting. Please try again later.", 'bot-msg');
            } finally {
                typingIndicator.style.display = 'none';
                inputEl.disabled = false;
                inputEl.focus();
            }
        }

        const translations = {
            nav_home: {
                en: "Home",
                hi: "होम"
            },
            nav_dashboard: {
                en: "Mission Control",
                hi: "मिशन कंट्रोल"
            },
            nav_calculator: {
                en: "Calculator",
                hi: "कैलकुलेटर"
            },
            nav_chatbot: {
                en: "AI Chatbot",
                hi: "AI चैटबॉट"
            },
            nav_ai_explainer: {
                en: "Solar Analysis",
                hi: "सोलर विश्लेषण"
            },
            nav_ai_visual: {
                en: "Your Solar Vision",
                hi: "आपका सोलर विजन"
            },
            nav_ai_video: {
                en: "Installation Preview",
                hi: "इंस्टॉलेशन पूर्वावलोकन"
            },
            nav_help: {
                en: "Help",
                hi: "सहायता"
            },
            nav_contact: {
                en: "Contact",
                hi: "संपर्क"
            },
            login_welcome: {
                en: "Welcome! Please log in to continue.",
                hi: "स्वागत है! जारी रखने के लिए कृपया लॉग इन करें।"
            },
            login_btn: {
                en: "Login",
                hi: "लॉग इन करें"
            },
            home_title: {
                en: "Light up Your Future with Solar Energy!",
                hi: "सौर ऊर्जा से अपने भविष्य को रोशन करें!"
            },
            home_subtitle: {
                en: "Reduce your electricity bills, protect the environment, and move towards a self-reliant energy future. Our 'SOLAR FOR ALL' calculator and AI will guide you every step of the way.",
                hi: "अपने बिजली के बिल कम करें, पर्यावरण की रक्षा करें और आत्मनिर्भर ऊर्जा भविष्य की ओर बढ़ें। हमारा 'सोलर फॉर ऑल' कैलकुलेटर और AI हर कदम पर आपका मार्गदर्शन करेंगे।"
            },
            home_card1_title: {
                en: "Instant Calculation",
                hi: "तुरंत गणना"
            },
            home_card1_desc: {
                en: "Estimate your system size, cost, and savings in seconds.",
                hi: "सेकंडों में अपने सिस्टम का आकार, लागत और बचत का अनुमान लगाएं।"
            },
            home_card1_btn: {
                en: "Go to Calculator",
                hi: "कैलकुलेटर पर जाएं"
            },
            home_card2_title: {
                en: "AI Assistant",
                hi: "AI सहायक"
            },
            home_card2_desc: {
                en: "Ask our AI chatbot anything about solar technology, subsidies, and maintenance.",
                hi: "हमारे AI चैटबॉट से सौर प्रौद्योगिकी, सब्सिडी और रखरखाव के बारे में कुछ भी पूछें।"
            },
            home_card2_btn: {
                en: "Chat Now",
                hi: "अभी चैट करें"
            },
            home_card3_title: {
                en: "Your Solar Vision",
                hi: "आपका सोलर विजन"
            },
            home_card3_desc: {
                en: "Visualize your environmental impact with AI-generated reports and visuals.",
                hi: "AI-जनरेटेड रिपोर्ट और विज़ुअल के साथ अपने पर्यावरणीय प्रभाव की कल्पना करें।"
            },
            home_card3_btn: {
                en: "See Visual",
                hi: "विज़ुअल देखें"
            },
            home_card4_title: {
                en: "Community Impact",
                hi: "सामुदायिक प्रभाव"
            },
            home_card4_desc: {
                en: "See the real-time environmental impact of our solar guardians worldwide.",
                hi: "दुनिया भर में हमारे सौर संरक्षकों के वास्तविक समय के पर्यावरणीय प्रभाव को देखें।"
            },
            home_card4_btn: {
                en: "See Impact",
                hi: "प्रभाव देखें"
            },
            gallery_title: {
                en: "Explore the World of Solar Energy",
                hi: "सौर ऊर्जा की दुनिया का अन्वेषण करें"
            },
            dashboard_title: {
                en: "Mission Control: Community Impact",
                hi: "मिशन कंट्रोल: सामुदायिक प्रभाव"
            },
            dashboard_stat1_title: {
                en: "Collective CO₂ Saved",
                hi: "सामूहिक CO₂ की बचत"
            },
            dashboard_stat2_title: {
                en: "Guardians Joined",
                hi: "जुड़े हुए संरक्षक"
            },
            dashboard_stat3_title: {
                en: "Equivalent Trees Planted",
                hi: "लगाए गए पेड़ों के बराबर"
            },
            did_you_know_title: {
                en: "NASA Tech on Your Roof!",
                hi: "आपकी छत पर NASA तकनीक!"
            },
            did_you_know_desc: {
                en: "The highly efficient solar cell technology we use today was pioneered by NASA to power satellites and spacecraft. By installing solar, you're using space-age tech to protect Earth!",
                hi: "आज हम जिस अत्यधिक कुशल सौर सेल तकनीक का उपयोग करते हैं, उसकी शुरुआत NASA ने उपग्रहों और अंतरिक्ष यान को बिजली देने के लिए की थी। सौर ऊर्जा लगाकर, आप पृथ्वी की रक्षा के लिए अंतरिक्ष-युग की तकनीक का उपयोग कर रहे हैं!"
            },
            calc_title: {
                en: "Your Solar Calculator",
                hi: "आपका सोलर कैलकुलेटर"
            },
            chat_title: {
                en: "Ask Your Solar Bot 🤖",
                hi: "अपने सोलर बॉट से पूछें 🤖"
            },
            explainer_title: {
                en: "Solar Analysis",
                hi: "सोलर विश्लेषण"
            },
            visual_title: {
                en: "Your Solar Vision",
                hi: "आपका सोलर विजन"
            },
            video_title: {
                en: "Installation Preview",
                hi: "इंस्टॉलेशन पूर्वावलोकन"
            },
            help_title: {
                en: "Help Center",
                hi: "सहायता केंद्र"
            },
            contact_title: {
                en: "Contact Us",
                hi: "हमसे संपर्क करें"
            },
            footer_text: {
                en: "&copy; 2025 SOLAR FOR ALL.",
                hi: "&copy; 2025 सभी के लिए सौर।"
            },
            subsidy_title: {
                en: "Your Subsidy Potential",
                hi: "आपकी सब्सिडी की संभावना"
            },
            subsidy_scheme: {
                en: "Based on your details, you may be eligible for the <strong>{schemeName}</strong>.",
                hi: "आपके विवरण के आधार पर, आप <strong>{schemeName}</strong> के लिए पात्र हो सकते हैं।"
            },
            subsidy_amount: {
                en: "Estimated Subsidy Amount: <strong>₹{amount}</strong>",
                hi: "अनुमानित सब्सिडी राशि: <strong>₹{amount}</strong>"
            },
            subsidy_cost_after: {
                en: "Cost after subsidy: <strong>₹{cost}</strong>",
                hi: "सब्सिडी के बाद लागत: <strong>₹{cost}</strong>"
            },
            loan_emi: {
                en: "Your estimated <strong>{bankName}</strong> EMI is <strong>₹{emi}/month</strong> for a period of {tenure} years.",
                hi: "आपकी अनुमानित <strong>{bankName}</strong> EMI {tenure} साल की अवधि के लिए <strong>₹{emi}/महीना</strong> है।"
            },
            subsidy_note: {
                en: "This is an estimate. Final amount may vary. Apply on the official government portal.",
                hi: "यह एक अनुमान है। अंतिम राशि भिन्न हो सकती है। आधिकारिक सरकारी पोर्टल पर आवेदन करें।"
            },
            not_eligible_reason: {
                en: "Your electricity bill is very low, which suggests solar energy might not be the most economical option for you right now.",
                hi: "आपका बिजली बिल बहुत कम है, जो दर्शाता है कि सौर ऊर्जा अभी आपके लिए सबसे किफायती विकल्प नहीं हो सकती है।"
            },
            gamify_title: {
                en: "Your Mission Impact",
                hi: "आपके मिशन का प्रभाव"
            },
            gamify_rover: {
                en: "Your annual energy could power NASA's <strong>Perseverance Rover on Mars for {roverDays} days!</strong>",
                hi: "आपकी वार्षिक ऊर्जा NASA के <strong>मंगल ग्रह पर पर्सिवरेंस रोवर को {roverDays} दिनों तक चला सकती है!</strong>"
            },
            gamify_iss: {
                en: "It could also power the <strong>International Space Station for {issSeconds} seconds!</strong>",
                hi: "यह <strong>अंतर्राष्ट्रीय अंतरिक्ष स्टेशन को {issSeconds} सेकंड तक भी चला सकती है!</strong>"
            },
            gamify_button: {
                en: "Activate Solar Colonist Mode",
                hi: "सोलर कॉलोनिस्ट मोड सक्रिय करें"
            },
            colonist_title: {
                en: "Solar Colonist Mode",
                hi: "सौर उपनिवेशक मोड"
            },
            colonist_subtitle: {
                en: "Here's the solar setup your home would need to survive off-world.",
                hi: "यहाँ वह सौर सेटअप है जिसकी आपके घर को बाहरी दुनिया में जीवित रहने के लिए ज़रूरत होगी।"
            },
            stat_size_value: {
                en: "{requiredKw} kW",
                hi: "{requiredKw} किलोवाट"
            },
            stat_size: {
                en: "System Size",
                hi: "सिस्टम का आकार"
            },
            stat_cost_value: {
                en: "₹{installCost}",
                hi: "₹{installCost}"
            },
            stat_cost: {
                en: "Total Cost",
                hi: "कुल लागत"
            },
            stat_savings_value: {
                en: "₹{monthlySavings}",
                hi: "₹{monthlySavings}"
            },
            stat_savings: {
                en: "Monthly Savings",
                hi: "मासिक बचत"
            },
            stat_payback_value: {
                en: "{payback} yrs",
                hi: "{payback} वर्ष"
            },
            stat_payback: {
                en: "Payback",
                hi: "भुगतान वापसी"
            },
            stat_co2_value: {
                en: "{co2} t/yr",
                hi: "{co2} टन/वर्ष"
            },
            stat_co2: {
                en: "CO₂ Saved",
                hi: "बचाया गया CO₂"
            },
            stat_trees_value: {
                en: "{trees}",
                hi: "{trees}"
            },
            stat_trees: {
                en: "Trees Equivalent",
                hi: "पेड़ों के बराबर"
            },
            aqi_title: {
                en: "Live Air Quality",
                hi: "लाइव वायु गुणवत्ता"
            },
            pollution_title: {
                en: "Pollution Reduction Impact",
                hi: "प्रदूषण में कमी का प्रभाव"
            },
            calc_emi_title: {
                en: "EMI Comparison",
                hi: "EMI तुलना"
            },
            explainer_generate_btn_text: {
                en: "Generate Solar Analysis",
                hi: "सौर विश्लेषण उत्पन्न करें"
            },
            explainer_play_btn: {
                en: "Play",
                hi: "चलाएँ"
            },
            explainer_stop_btn: {
                en: "Stop",
                hi: "रोकें"
            },
            visual_placeholder: {
                en: "Visual will appear here",
                hi: "विज़ुअल यहाँ दिखाई देगा"
            },
            video_placeholder: {
                en: "Video will appear here",
                hi: "वीडियो यहाँ दिखाई देगा"
            },
            visual_generate_btn: {
                en: "Generate Visual",
                hi: "विज़ुअल उत्पन्न करें"
            },
            video_generate_btn: {
                en: "Generate Video",
                hi: "वीडियो उत्पन्न करें"
            },
            help_subtitle1: {
                en: "Here you will find answers to frequently asked questions about solar energy, our calculator, and services.",
                hi: "यहाँ आपको सौर ऊर्जा, हमारे कैलकुलेटर और सेवाओं के बारे में अक्सर पूछे जाने वाले प्रश्नों के उत्तर मिलेंगे।"
            },
            faq1_q: {
                en: "What is solar energy?",
                hi: "सौर ऊर्जा क्या है?"
            },
            faq1_a: {
                en: "Solar energy is energy generated by converting sunlight into electricity, typically using photovoltaic (PV) panels.",
                hi: "सौर ऊर्जा वह ऊर्जा है जो सूर्य के प्रकाश को बिजली में परिवर्तित करके उत्पन्न होती है, आमतौर पर फोटोवोल्टिक (PV) पैनलों का उपयोग करके।"
            },
            faq2_q: {
                en: "What are the benefits of solar energy?",
                hi: "सौर ऊर्जा के क्या लाभ हैं?"
            },
            faq2_a: {
                en: "Solar energy reduces electricity bills, decreases the carbon footprint, and provides energy independence.",
                hi: "सौर ऊर्जा बिजली के बिलों को कम करती है, कार्बन पदचिह्न को घटाती है, और ऊर्जा स्वतंत्रता प्रदान करती है।"
            },
            contact_subtitle: {
                en: "Contact us to learn more about our solar energy solutions or for any inquiries.",
                hi: "हमारे सौर ऊर्जा समाधानों के बारे में अधिक जानने या किसी भी पूछताछ के लिए हमसे संपर्क करें।"
            },
            contact_name_placeholder: {
                en: "Your Name",
                hi: "आपका नाम"
            },
            contact_email_placeholder: {
                en: "Your Email",
                hi: "आपका ईमेल"
            },
            contact_message_placeholder: {
                en: "Your Message",
                hi: "आपका संदेश"
            },
            contact_send_btn: {
                en: "Send Message",
                hi: "संदेश भेजें"
            },
            calc_calc_btn: {
                en: "Calculate",
                hi: "गणना करें"
            },
            calc_reset_btn: {
                en: "Reset",
                hi: "पुनर्स्थापित करें"
            },
            chat_placeholder: {
                en: "e.g., How much does solar energy cost?",
                hi: "उदाहरण के लिए, सौर ऊर्जा की लागत कितनी है?"
            },
            chat_send_btn: {
                en: "Send",
                hi: "भेजें"
            },
            chat_welcome: {
                en: "Hello! I'm here to answer your questions about solar energy.",
                hi: "नमस्ते! मैं सौर ऊर्जा के बारे में आपके सवालों का जवाब देने के लिए यहाँ हूँ।"
            },
            surveyor_title: {
                en: "Virtual Roof Surveyor",
                hi: "आभासी छत सर्वेक्षक"
            },
            surveyor_address_label: {
                en: "Enter your exact address or just your city name.",
                hi: "अपना सटीक पता या सिर्फ़ अपने शहर का नाम दर्ज करें।"
            },
            surveyor_instructions: {
                en: "Use the draw tool (■) on the map for exact area.",
                hi: "सटीक क्षेत्र के लिए मैप पर ड्रा टूल (■) का उपयोग करें।"
            },
            calc_heading: {
                en: "SOLAR FOR ALL",
                hi: "सभी के लिए सौर"
            },
            calc_subtitle: {
                en: "Enter your bill/units to get system size, cost, and savings.",
                hi: "अपने बिल/इकाइयां दर्ज करें ताकि सिस्टम का आकार, लागत और बचत का पता चले।"
            },
            calc_bill_label: {
                en: "Monthly Bill (₹)",
                hi: "मासिक बिल (₹)"
            },
            calc_budget_label: {
                en: "Budget (₹)",
                hi: "बजट (₹)"
            },
            calc_tariff_label: {
                en: "Tariff (₹/unit)",
                hi: "टैरिफ (₹/यूनिट)"
            },
            calc_cost_label: {
                en: "Cost per kW (₹)",
                hi: "प्रति किलोवाट लागत (₹)"
            },
            calc_roof_label: {
                en: "Roof Area (sq ft)",
                hi: "छत का क्षेत्रफल (वर्ग फुट)"
            },
            calc_lang_label: {
                en: "Language",
                hi: "भाषा"
            },
            schemes_title: {
                en: "Government Schemes & Subsidy",
                hi: "सरकारी योजनाएँ और सब्सिडी"
            },
            schemes_subtitle: {
                en: "Get an estimate of your government subsidy.",
                hi: "अपनी सरकारी सब्सिडी का अनुमान प्राप्त करें।"
            },
            schemes_state: {
                en: "State",
                hi: "राज्य"
            },
            schemes_income: {
                en: "Monthly Income (₹)",
                hi: "मासिक आय (₹)"
            },
            schemes_bank: {
                en: "Loan Bank",
                hi: "ऋण बैंक"
            },
            schemes_panel: {
                en: "Panel Type",
                hi: "पैनल प्रकार"
            }
        };

        function changeLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (translations[key] && translations[key][lang]) {
                    let text = translations[key][lang];
                    if (lastCalc && lastCalc.subsidyInfo) {
                        text = text.replace('{schemeName}', lastCalc.subsidyInfo.schemeName || '');
                        text = text.replace('{amount}', lastCalc.subsidyInfo.subsidyAmount.toLocaleString() || '');
                    }
                    if (lastCalc) {
                        text = text.replace('{cost}', lastCalc.finalCostAfterSubsidy.toLocaleString() || '');
                    }
                    if (lastCalc && lastCalc.loanInfo) {
                        text = text.replace('{bankName}', lastCalc.loanInfo.bankName || '');
                        text = text.replace('{tenure}', lastCalc.loanInfo.loanTenure || '');
                        text = text.replace('{emi}', lastCalc.loanInfo.monthlyEMI ? lastCalc.loanInfo.monthlyEMI.toFixed(0).toLocaleString() : '');
                    }

                    if (lastCalc) {
                        text = text.replace('{requiredKw}', lastCalc.requiredKw);
                        text = text.replace('{installCost}', lastCalc.installCost.toLocaleString());
                        text = text.replace('{monthlySavings}', lastCalc.monthlySavings.toLocaleString());
                        text = text.replace('{payback}', lastCalc.payback);
                        text = text.replace('{co2}', lastCalc.co2);
                        text = text.replace('{trees}', lastCalc.trees);
                        text = text.replace('{roverDays}', (lastCalc.requiredKw * 4.5 * 365 / 2.5).toFixed(0));
                        text = text.replace('{issSeconds}', ((lastCalc.requiredKw / 120) * 3600).toFixed(0));
                    }

                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = text;
                    } else {
                        element.innerHTML = text;
                    }
                }
            });
        }
    </script>

</body>

</html>
